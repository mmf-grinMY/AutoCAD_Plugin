# Журнал изменений

## [**1.0.1**] - |2024-04-19|

### Изменены

- Файл запроса объектов к БД.

## [1.0.0] - 2024-04-17

### Добавлены

- Файл описания проекта ```README.md```.

## [0.10.0] - 2024-04-15

### Изменены

 - Новая версия команды **VRM_INSPECT_EXT_DB** заменена на первончальный вариант.
 - Вывод атрибутивной таблицы происходит в ```WinForms.DataTable.cs```.
 - Новая версия **VRM_INSPECT_EXT_DB** переименована в **MMP_INSPECT_EXT_DB** и удалена из списка доступных команд.
 - Цвет шаблонного блока задается каждым рисуемым блоком отдельно.
 - Изменен общий масштаб паттернов заливки.

## [0.9.5] - 2024-04-11

### Изменены

 - Окно подключения.
 - Ввод пользователем _BoundingBox_ происходит при отметки ```CheckBox``` в окне подключения и после выбора рисуемого горизонта.
 - Радиус блока по умолчанию изменен с 3 до 1,5 метров.

## [0.9.4] - 2024-04-10

### Добавлены

 - Первоначальный набор End-To-End тестов для тестирования команды **MMP_DRAW**.

### Изменены 

 - Исправлена ошибка поведения кнопки отмены операции отрисовки геометрии.

### Удалены

 - Специализация логирования исключений в ```MyTransaction```.

## [0.9.3] - 2024-04-10

### Добавлены

 - Файлы паттернов заливки в папку _"/Resources/Hatches/"_.
 - Файл стилизации примитивов _"style.config.json"_.
 - Блок по умолчанию &mdash; черная окружность радиусом 3 метра.
 - Высота текста по умолчанию &mdash; 10pt.
 - Файл типизации линий.

### Изменены

 - Логика добавления каталога сборки в дружественные папки **AutoCAD**.
 - Файл _"Pattern.conf.xml"_ переименован в _"Pattern.xml"_.
 - Префикс имен типов линий изменен с _MMP_ на _MMLT_.

## [0.9.2] - 2024-04-08

### Добавлены

 - Поддержка длинной геометрии дял примитива ```Polyline.cs```.
 - Файл настройки сборки ```AssemblyInfo.cs```.
 - Файлы ресурсов.
 - Погрузка всевоможных стилей линий из конфигурационного файла.
 - Отдельный класс расширений для примитива ```Polyline```.
 - Конфигурационный файл работы настройки работы команды **MMP_DRAW**.

### Изменены

 - Декомпозиция связи основных классов до уровня интерфейсов.
 - Вспомогательный класс для взаимодействия с БД ```DbHelper.cs``` и интерфейс ```IDbDispatcher.cs``` выделен в отдельный файл.
 - Внешний вид окна подключения.

### Удалены

 - Команда **MMP_DEBUG**.
 - Команда **MMP_TEST_DRAW**.
 - Команда **MMP_COUNT**.
 - Команда **MMP_SCALE**.
 - Команда **AddMline**.

## [0.9.1] - 2024-04-07

### Добавлены

 - Команда **TEST_NULL** для тестирования подлючения к БД без параметров.

### Изменены

 - Список доступных для отрисовки горионтов формируется запросом к БД.
 - Создание диспетчера подключения к БД.
 - Чтение объектов вынесено как метод класса ```OracleDbDispatcher.cs```.
 - Поддержка ```MULTILINESTRING``` объектов.
 - Исправлена ошибка в ```Parser.cs```.

### Удалены

 - Проверка наличия параметров подключения на этапе ввода параметров.
 - Сборка конфертации _*.chr_ файлов.

## [0.9.0] - 2024-04-07

### Добавлены

 - Кэш для хранения загружаемых из файлов настроек отрисовки примитивов.

### Изменены

 - Блоки загружаются из вспомогательных файлов.
 - Комментирование важных частей кода.

## [0.8.4] - 2024-04-06

### Добавлены

 - Логирование критической ошибки, связанной с невозможностью парсинга длинной геометрии.
 - Режим быстрого запуска для проверки работоспособности команды **MMP_DRAW**.

### Изменены

 - Исправлена ошибка запуска сессии при ввводе пользователем _BoundingBox_.
 - Исправлена критическая ошибка при отсутствии конфигурационных настроек заливок в файле настроек.
 - Исправлена ошибка взятия длинной геометрии только с горизонта 420.
 - Исправлена ошибка хранения Guid объекта.

## [0.8.3] - 2024-04-01

### Добавлены

 - Ввод пользователем _BoundingBox_.

### Изменены

 - Внесение правок в архитектуру взаимодействия классов.
 - Учет пользовательского _BoundingBox_ посредством уточнения запроса к БД.
 - Возвращено приближение к отрисованному участку чертежа.

## [0.8.2] - 2024-04-01

### Добавлены

 - Примитивы имеют собстенный набор стилей.

### Удалены

 - Функционал работы с объектами ```MLine```.

## [0.8.1] - 2024-04-01

### Добавлены

 - Папка плагина является дружественной для **AutoCAD**.
 - Отрисовка объектов ```Mline``` набором команд, а также их стилизация.
 - Класс-лиспетчер для работы с таблицей записей ```RegTable```.

### Изменены

 - Упрощена архитектура системы логирования.
 - Расширены возможности создания новых записей в таблицы символов.

### Удалены

 - Общее масштабрирование всех объектов в 1_000 раз.

## [0.8.0] - 2024-03-26

### Добавлены

 - Возможность управления процессом работы команды **MMP_DRAW** посредством остановки/запуска с места остановки.
 - Команда **MMP_DEBUG** для просмотра атрибутивной таблицы **AutoCAD** выбранного объекта.
 - Хранение порядкового номера отрисованного объекта в БД.

## [0.7.1] - 2024-03-25

### Добавлены

 - Смещение текста.
 - Особые случаи логирования ошибок.

### Изменены

 - Конвертер числел с плавающей точкой из строкового представления.
 - Исправление наименования слоев в **AutoCAD**.
 - Исправление ошибки обработки объекта длинной геометрии с нулевой площадью.

## [0.7.0] - 2024-03-25

### Добавлены

 - Exception-Safe обертка ```MyTransaction.cs``` относительно внутренних транзакций **AutoCAD**, с поддержкой логирования. 

### Изменены

 - Работа с внутренними таблицами **AutoCAD** происходит с помощью классов-диспетчеров.
 - Конфигурация потока чтения из файла.

## [0.6.3] - 2024-03-25

### Добавлены

 - Комментарии к важным частям кода.

### Изменены

 - Повышена отказоустойчивость плагина.
 - Запрос чтения геометрии из БД хранится в файле **_draw.sql_**.

## [0.6.2] - 2024-03-23

### Добавлены

 - ```Parser.cs``` как самостоятельный парсер формата **WKT**.

### Изменены

 - Исправление ошибок.
 - Критические ошибки работы плагина логируются в файл.

## [0.6.1] - 2024-03-22

### Добавлен

 - Собственный логер событий, записывающий результаты работы в файл.
 - Класс-диспетчер для работы с таблицей слоев **AutoCAD**.
 - Класс ```Session.cs```.

### Изменены

 - Загрузчик конфигурации паттернов заливок вынесен в отдельный файл.
 - Отрисовка новых блоков происходит без вспомогательного класса ```ResourceManager.cs```.
 - Вся логика управления командой **MMP_DRAW** перенесена из ```ObjectDispatcher.cs``` в ```Session.cs```.

### Удалены

- ```ObjectDispatcher.cs```.

## [0.6.0] - 2024-03-21

### Добавлены

 - Понятие сеанса работы команды отрисовки.
 - Логирование работы плагина.
 - Команда **MMP_TEST_DRAW**.

### Изменены

 - Функционал масштабрирования перенесен в отдельную команду **MMP_SCALE**.
 - Логика отрисовки перемещена во ```ViewModel``` окна мониторнга процессом отрисовки.

### Удалены

 - Окна отладки и сопутствующие классы.
 - Загрузчик линий.

## [0.5.1] - 2024-03-18

### Добавлены

 - Команда **MMP_COUNT** для подсчета отрисованных на чертеже объектов.
 - Команда **MMP_HATCH** для быстрой отрисовки основных рисуемых объектов.
 - Окна отладки при отрисовке объектов.
 - Запрос количества рисуемых объектов.
 - Первоначальная поддержка длинной геометрии.

### Изменены

 - Логика перерисовки примитивов при масштабировании.
 - Загрузчик линий вынесен в отдельный файл.
 - Отрисовка объетков происходит в 2 потока.

## [0.5.0] - 2024-03-03

### Добавлены

 - Масштабирование чертежа.

### Изменены

 - Создание блоков происходит по описанию из файла.
 - Возвращен собственный парсер геометрии **WKT** для _Polyline_.
 - Общие настройки ```Polyline.cs``` и ```Polygon.cs``` вынесены в класс расширения методов.

## [0.4.0] - 2024-02-29

### Добавлены

 - Стилизация линий.
 - Кэш для хранения конфигураций заливок.
 - Загрузка стилей линий из файла.

### Изменены

 - Константы конфишурации параметров отрисовки перемещены в отдельный файл.
 - Исправление бага с поворотом текста.
 - Расширены параметры подключения. Добавлены номер порта. Имя БД вводится отдельно хосту.
 - Исправление бага с изменением размера окна подключения.
 - Рефакторинг отображения атрибутивной таблицы.
 - Упрощен запрос данных из БД.
 - Все действия с БД проходят через класс-диспетчер.

### Удалены

 - Лишние проекты/сборки/файлы.

## [0.3.1] - 2024-02-27

### Добавлены

 - Отдельный класс управления подключения с БД.
 - Константы настройки параметров отрисовки примитивов.
 - Комментарии к некоторым частям кода.
 - Настраиваемая заливка объектов ```Polygon.cs```.

### Изменены

 - Рефакторинг команд плагина.
 - Параметры подключения сохраняются на протяжении сеанса работы с плагином.
 - Параметры подключения к атрибутивной таблице хранятся в отдельной структуре данных.

### Удалены

 - Возможность отрисовки объектов в пользовательском _BoundingBox_.
 - Многопоточный конвейер обработки геометрии примитивов.
 - Класс-конструктор **SQL**.
 - Классы-помощники команды **VRM_INSPECT_EXT_DB**.
 - Окно мониторинга прогресса отрисовки.

## [0.3.0] - 2024-02-23

### Добавлены

 - Возможность выбора рисуемого горизонта.
 - Константа расположения конфигурационного файла плагина.

### Изменены

 - Форма подключения к БД.

### Удалены

 - Отдельная форма подключения для команды **VRM_INSPECT_EXT_DB**.

## [0.2.1] - 2024-02-21

### Добавлены

 - Системные библиотеки.
 - Конвертер конфигурации паттернов заливки из _*.conf_ в _*.xml_.
 - Класс-конструктор запросов _SQL_.

### Изменены

 - Проведен рефакторинг основных классов, отвечающих за отрисовку.
 - Примитивы больше не подсчитывают количество ошибочно отрисованных объектов.

### Удалены

 - Команда **MMP_LOAD_LINETYPE**.

## [0.2.0] - 2024-02-08

### Добавлены

 - Команда **VRM_INSPECT_EXT_DB** для просмотра атрибутивной таблицы.
 - Фабрика примитивов отрисовки.

### Изменены

 - Знаки представлены готовыми блоками, а не шрифтами.
 - Общие постоянные данные хранятся в статическом классе ```Constsants.cs```.

## [0.1.0] - 2024-01-19

### Добавлены

 - Специализированные классы для работы с рисуемыми примитивами.
 - Конвертер специализации линий из формата _*.def_ в _*.json_.
 - Конвертер цвета из представления **MapManager** в **RGB** .

### Изменены

- Логика работы класса управления процессом отрисовки.

## [0.0.5] - 2024-01-16

### Добавлены

 - Конвертер из формата _*.chr_ в _*.bdf_.
 - Окно мониторинга прогресса отрисовки.

### Изменены

 - Логика управления процессом отрисовки перенесена в отдельный класс.
 - Внешний вид окна подключения.

### Удалены

 - Собственный парсер **WKT** формата.
 - Тесты для парсера геометрии примитивов.
 - Старые части программы в комментариях.

## [0.0.4] - 2023-12-11

### Добавлены

 - Конвейер обработки примитивов.

### Изменены

 - Поле ввода пароля заменено на специализированное.
 - Мелкие исправления.
 - Конвертация геометрии объектов происходит с помощью библиотеки ```Aspose.Gis```.

## [0.0.3] - 2023-10-24

### Добавлены

 - Первоначальная легендаризация примитивов.

## [0.0.2] - 2023-10-23

### Добавлены

 - При отрисовке учитывается расположение объектов по слоям.

## [0.0.1] - 2023-10-23

### Добавлены

 - Первоначальный вариант отрисовки геометрии из БД.
 - Поддержка данных из файла _*.xml_.
